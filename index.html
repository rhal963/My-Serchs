<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>واجهة بحث متعددة المحركات</title>
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* حيلة صغيرة لتحسين مظهر التمرير */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-thumb { background: #c7d2fe; border-radius: 999px; }
    ::-webkit-scrollbar-track { background: #f1f5f9; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-sky-50 via-white to-indigo-50">
  <div class="pointer-events-none fixed inset-0 overflow-hidden -z-10">
    <div class="absolute -top-24 -left-24 w-80 h-80 rounded-full blur-3xl bg-sky-200/40"></div>
    <div class="absolute -bottom-32 -right-24 w-96 h-96 rounded-full blur-3xl bg-indigo-200/40"></div>
  </div>

  <main class="relative z-10 mx-auto max-w-4xl px-4 py-10">
    <!-- Header -->

    <!-- Card -->
    <section class="backdrop-blur bg-white/80 rounded-3xl shadow-xl p-5 md:p-7 border border-slate-100">
      <form id="searchForm" class="flex flex-col gap-5">
        <div class="flex items-center gap-3">
          <input id="queryInput" type="text" placeholder="اكتب الشيء المراد البحث عنه" class="flex-1 rounded-2xl border border-slate-200 focus:outline-none focus:ring-4 focus:ring-sky-200 focus:border-sky-300 px-5 py-4 text-slate-800 placeholder-slate-400 shadow-inner" />
          <button id="searchBtn" type="submit" class="inline-flex items-center gap-2 rounded-2xl px-5 py-4 bg-gradient-to-l from-sky-600 to-indigo-600 text-white hover:from-sky-500 hover:to-indigo-500 transition shadow disabled:opacity-50 disabled:cursor-not-allowed">
            <span>🔎</span> ابحث
          </button>
        </div>

        <!-- Engines -->
        <div id="enginesWrap" class="flex flex-wrap gap-2"></div>

        <!-- Options -->
        <div class="flex flex-wrap items-center gap-4 text-sm text-slate-600">
          <label class="inline-flex items-center gap-2 cursor-pointer">
            <input type="radio" name="openMode" value="new" checked /> فتح النتائج في تبويبات جديدة
          </label>
          <label class="inline-flex items-center gap-2 cursor-pointer">
            <input type="radio" name="openMode" value="same" /> فتح في نفس التبويب (لمحرك واحد فقط)
          </label>
        </div>
      </form>

      <!-- Links -->
      <div id="linksBox" class="hidden mt-6 bg-white/80 rounded-3xl shadow p-4 border border-slate-100">
        <div class="text-sm text-slate-500 mb-3">روابط مباشرة لنتيجة البحث:</div>
        <div id="linksWrap" class="flex flex-wrap gap-2"></div>
        <div class="mt-3 text-xs text-slate-400">ملاحظة: بعض المحركات تمنع العرض داخل iframe، لذلك نفتح النتائج في تبويب جديد.</div>
      </div>
    </section>

    <p class="mt-6 text-xs text-slate-500">اختصارات: Enter = بحث، Ctrl/Cmd + 1..11 لتبديل المحركات بسرعة.</p>
    <footer class="mt-10 text-center text-xs text-slate-400">صمم من قبل ابو حسن</footer>
  </main>

  <script>
    // تعريف المحركات
    const ENGINES = [
      { id: "google", name: "Google", emoji: "🔎", buildUrl: q => `https://www.google.com/search?q=${encodeURIComponent(q)}` },
      { id: "bing", name: "Bing", emoji: "🟢", buildUrl: q => `https://www.bing.com/search?q=${encodeURIComponent(q)}` },
      { id: "duck", name: "DuckDuckGo", emoji: "🦆", buildUrl: q => `https://duckduckgo.com/?q=${encodeURIComponent(q)}` },
      { id: "yahoo", name: "Yahoo", emoji: "🟣", buildUrl: q => `https://search.yahoo.com/search?p=${encodeURIComponent(q)}` },
      { id: "yandex", name: "Yandex", emoji: "🟥", buildUrl: q => `https://yandex.com/search/?text=${encodeURIComponent(q)}` },
      { id: "youtube", name: "YouTube", emoji: "▶️", buildUrl: q => `https://www.youtube.com/results?search_query=${encodeURIComponent(q)}` },
      { id: "wiki", name: "Wikipedia", emoji: "📚", buildUrl: q => `https://ar.wikipedia.org/w/index.php?search=${encodeURIComponent(q)}` },
      { id: "facebook", name: "Facebook", emoji: "📘", buildUrl: q => `https://www.facebook.com/search/top/?q=${encodeURIComponent(q)}` },
      { id: "instagram", name: "Instagram", emoji: "📸", buildUrl: q => `https://www.google.com/search?q=site%3Ainstagram.com+${encodeURIComponent(q)}` },
      { id: "tiktok", name: "TikTok", emoji: "🎵", buildUrl: q => `https://www.tiktok.com/search?q=${encodeURIComponent(q)}` },
      { id: "x", name: "X (Twitter)", emoji: "🕊️", buildUrl: q => `https://x.com/search?q=${encodeURIComponent(q)}&src=typed_query` },
    ];

    const enginesWrap = document.getElementById('enginesWrap');
    const linksBox = document.getElementById('linksBox');
    const linksWrap = document.getElementById('linksWrap');
    const form = document.getElementById('searchForm');
    const input = document.getElementById('queryInput');
    const searchBtn = document.getElementById('searchBtn');

    // الحالة
    let selected = new Set(['google']); // افتراضي: Google

    // بناء أزرار المحركات
    ENGINES.forEach((e, i) => {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.title = e.name;
      btn.className = pillClass(false);
      btn.innerHTML = `<span class="mr-1.5">${e.emoji}</span>${e.name}`;
      btn.addEventListener('click', () => {
        const active = selected.has(e.id);
        if (active) selected.delete(e.id); else selected.add(e.id);
        btn.className = pillClass(selected.has(e.id));
        renderLinks();
      });
      enginesWrap.appendChild(btn);

      // اختصارات Ctrl/Cmd + رقم
      window.addEventListener('keydown', (ev) => {
        const idx = Number(ev.key) - 1;
        if ((ev.ctrlKey || ev.metaKey) && idx === i) {
          ev.preventDefault();
          btn.click();
        }
      });
    });

    function pillClass(active) {
      return (
        'px-3.5 py-2 rounded-full border text-sm transition shadow-sm hover:shadow ' +
        (active
          ? 'bg-gradient-to-l from-sky-50 to-indigo-50 text-sky-800 border-sky-200'
          : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50')
      );
    }

    // توليد الروابط المباشرة
    function renderLinks() {
      const q = input.value.trim();
      linksWrap.innerHTML = '';
      if (!q || selected.size === 0) { linksBox.classList.add('hidden'); return; }
      ENGINES.filter(e => selected.has(e.id)).forEach(e => {
        const a = document.createElement('a');
        a.href = e.buildUrl(q);
        a.target = '_blank';
        a.rel = 'noreferrer';
        a.className = 'inline-flex items-center gap-1.5 px-3.5 py-2 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-700 bg-white';
        a.innerHTML = `<span class="mr-0.5">${e.emoji}</span>${e.name}
                       <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><path d="M15 3h6v6"/><path d="M10 14L21 3"/></svg>`;
        linksWrap.appendChild(a);
      });
      linksBox.classList.remove('hidden');
    }

    input.addEventListener('input', () => {
      renderLinks();
      searchBtn.disabled = input.value.trim().length === 0 || selected.size === 0;
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const q = input.value.trim();
      if (!q || selected.size === 0) return;

      const openMode = new FormData(form).get('openMode');
      const engines = ENGINES.filter(e => selected.has(e.id));
      engines.forEach((engine) => {
        const url = engine.buildUrl(q);
        if (openMode === 'new') window.open(url, '_blank');
        else window.location.href = url;
      });
    });

    // تفعيل حالة زر البحث بدايةً
    searchBtn.disabled = true;
  </script>
</body>
</html>
